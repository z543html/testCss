<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <script src="https://cdn.bootcdn.net/ajax/libs/vConsole/3.9.0/vconsole.min.js"></script>
    <script>
        // init vConsole
        var vConsole = new VConsole();
        console.log('Hello world');
    </script>
    
</head>
<body>
  <div>测试</div>
  <button onclick="toApp()">唤起5</button>
  <br>
  <br>
  <br>
  <button onclick="toApp1()">唤起新版</button>
  <br>
  <br>
  <button onclick="toApp2()">唤起旧版</button>
  <br>
  <br>
  <button onclick="toApp3()">唤起旧版2</button>
  <script>
    function toApp() {
      var url = 'zhsh://'+'gd'+'.10086' + '.cn';
      var OldUrl = 'gmcchhapp://main'
      location.href = url + '?vtime=' + new Date().getTime();
      console.log('ios_new_url',url)
      console.log('window.location.href',window.location)
      setTimeout(function (){
        console.log('toApp')
        window.location.href = OldUrl + '?vtime=' + new Date().getTime();
      },2000);
      // var it = setInterval(() => {
      //   clearInterval(it)
      //   console.log('ios_old_url',OldUrl)
      //   window.location.href = OldUrl + '?vtime=' + new Date().getTime();
      // }, 3000);
      // handleJumpAppTimeout(function () {
      //   console.log('ios_old_url',OldUrl)
      //   window.location.href = OldUrl + '?vtime=' + new Date().getTime();
      //   console.log('document.readyState',document.readyState)
      //   setTimeout(function (){
      //     console.log('setTimeout2')
      //     console.log('document.readyState1',document.readyState)
      //     window.location.href = OldUrl + '?vtime=' + new Date().getTime();
      //   },100);
      // })

    };
    function toApp1() {
      var url = 'zhsh://'+'gd'+'.10086' + '.cn';
      url = url + '?vtime=' + new Date().getTime();
      console.log('ios_new_url1',url)
      location.href = url;
    }
    function toApp2() {
      var url = 'gmcchhapp://main';
      url = url + '?vtime=' + new Date().getTime();
      console.log('ios_old_url2',url)
      location.href = url;
    }
    function toApp3() {
      var url = 'gmcchhapp://main';
      url = url + '?vtime=' + new Date().getTime();
      console.log('ios_old_url2',url)
      setTimeout(function (){
        console.log('toApp3')
        location.href = url;
      },2000);
    }
    function handleJumpAppTimeout (fn) {
      console.log('handleJumpAppTimeout')
      var timeOut = 2000;
      var timer,start = new Date().getTime();
      setTimeout(function (){
        console.log('setTimeout2')
        if (fn && typeof fn === 'function') {
          fn();
        }
      },timeOut);
    };
  </script>
</body>
</html>